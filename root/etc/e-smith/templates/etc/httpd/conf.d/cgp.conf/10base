{
    use esmith::ConfigDB;
    use esmith::util;

    my $alias = $cgp{'alias'} || "";
    
    # initialize alias if needed
    if ($alias eq "") {
        $alias = esmith::util::genRandomHash();
        my $confdb = esmith::ConfigDB->open();
        $confdb->set_prop('cgp','alias',$alias);
    }

    my $public = $cgp{'PublicAccess'} || "enabled";
    my $access = "all granted";
    if ($public eq "disabled") {
        $access = "$localAccess";
    }
   

    $OUT = "
<IfModule !cgi_module>
    LoadModule cgi_module modules/mod_cgi.so
</IfModule>
    
Alias /$alias /usr/share/cgp

<Directory /usr/share/cgp>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Require $access
</Directory>
";
}
